{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,Link}from'react-router-dom';import'./SearchBarResults.scss';import defaultImage from'../../assets/default.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SearchBarResults=()=>{const[searchResults,setSearchResults]=useState([]);const[currentPage,setCurrentPage]=useState(1);const{searchTerm}=useParams();const authToken=localStorage.getItem('authToken');const recipesPerPage=9;useEffect(()=>{const fetchSearchResults=async()=>{try{const response=await axios.get(\"http://localhost:5000/recipes/search/recipe-name/\".concat(searchTerm),{headers:{Authorization:\"Bearer \".concat(authToken)}});setSearchResults(response.data);}catch(error){console.error(\"Error fetching search results for recipe-name:\",error);}};fetchSearchResults();},[authToken,searchTerm]);const totalPages=Math.ceil(searchResults.length/recipesPerPage);const handlePageChange=page=>{setCurrentPage(page);};const indexOfLastRecipe=currentPage*recipesPerPage;const indexOfFirstRecipe=indexOfLastRecipe-recipesPerPage;const currentRecipes=searchResults.slice(indexOfFirstRecipe,indexOfLastRecipe);function truncateTitle(text){const max=66;if(text.length>max){return text.substring(0,max)+'...';}return text;}return/*#__PURE__*/_jsxs(\"div\",{className:\"overall\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search Results\"}),searchResults.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"No recipes matching that search.\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:currentRecipes.map(recipe=>/*#__PURE__*/_jsx(\"div\",{className:\"grid-unit--large\",children:/*#__PURE__*/_jsxs(Link,{to:\"/recipes/\".concat(recipe.recipe_id),children:[/*#__PURE__*/_jsx(\"h3\",{children:truncateTitle(recipe.title)}),recipe.image?/*#__PURE__*/_jsx(\"img\",{src:recipe.image,alt:recipe.title}):/*#__PURE__*/_jsx(\"img\",{id:\"image--default\",src:defaultImage,alt:\"N/A\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Meal Type: \",recipe.meal_type]}),recipe.dietary_restriction==='gluten_free'?/*#__PURE__*/_jsx(\"p\",{children:\"Dietary Restriction: gluten free\"}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Dietary Restriction: \",recipe.dietary_restriction]})]})},recipe.recipe_id))}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:Array.from({length:totalPages},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(index+1),className:\"button--page \".concat(currentPage===index+1?'active-page':''),children:index+1},index))})]})]});};export default SearchBarResults;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","Link","defaultImage","jsx","_jsx","jsxs","_jsxs","SearchBarResults","searchResults","setSearchResults","currentPage","setCurrentPage","searchTerm","authToken","localStorage","getItem","recipesPerPage","fetchSearchResults","response","get","concat","headers","Authorization","data","error","console","totalPages","Math","ceil","length","handlePageChange","page","indexOfLastRecipe","indexOfFirstRecipe","currentRecipes","slice","truncateTitle","text","max","substring","className","children","map","recipe","to","recipe_id","title","image","src","alt","id","meal_type","dietary_restriction","Array","from","_","index","onClick"],"sources":["/Users/adamrathbun/Desktop/cinema-chef/client/src/components/SearchBarResults/SearchBarResults.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, Link } from 'react-router-dom';\nimport './SearchBarResults.scss';\nimport defaultImage from '../../assets/default.png';\n\nconst SearchBarResults = () => {\n  const [searchResults, setSearchResults] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const { searchTerm } = useParams();\n  const authToken = localStorage.getItem('authToken');\n  const recipesPerPage = 9;\n\n  useEffect(() => {\n    const fetchSearchResults = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/recipes/search/recipe-name/${searchTerm}`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n          },\n        });\n        setSearchResults(response.data);\n      } catch (error) {\n        console.error(`Error fetching search results for recipe-name:`, error);\n      }\n    };\n\n    fetchSearchResults();\n  }, [authToken, searchTerm]);\n\n  const totalPages = Math.ceil(searchResults.length / recipesPerPage);\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n  };\n\n  const indexOfLastRecipe = currentPage * recipesPerPage;\n  const indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n  const currentRecipes = searchResults.slice(indexOfFirstRecipe, indexOfLastRecipe);\n\n  function truncateTitle(text) {\n    const max = 66\n    if (text.length > max) {\n      return text.substring(0, max) + '...'\n    }\n    return text\n  }\n\n  return (\n    <div className='overall'>\n      <h2>Search Results</h2>\n      {searchResults.length === 0 ? (\n        <h3>No recipes matching that search.</h3>\n      ) : (\n        <div>\n          <div className='grid'>\n            {currentRecipes.map((recipe) => (\n              <div className='grid-unit--large' key={recipe.recipe_id}>\n                <Link to={`/recipes/${recipe.recipe_id}`}>\n                  <h3>{truncateTitle(recipe.title)}</h3>\n                  {recipe.image ? (\n                    <img src={recipe.image} alt={recipe.title} />\n                  ) : (\n                    <img id='image--default' src={defaultImage} alt='N/A' />\n                  )}\n                  <p>Meal Type: {recipe.meal_type}</p>\n                  {recipe.dietary_restriction === 'gluten_free' ? (\n                    <p>Dietary Restriction: gluten free</p>\n                  ) : (\n                    <p>Dietary Restriction: {recipe.dietary_restriction}</p>\n                  )}\n                </Link>\n              </div>\n            ))}\n          </div>\n          {totalPages > 1 && (\n            <div className='pagination'>\n              {Array.from({ length: totalPages }, (_, index) => (\n                <button\n                  key={index}\n                  onClick={() => handlePageChange(index + 1)}\n                  className={`button--page ${currentPage === index + 1 ? 'active-page' : ''}`}\n                >\n                  {index + 1}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SearchBarResults;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}