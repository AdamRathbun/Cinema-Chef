{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import'./YourRecipes.scss';import defaultImage from'../../assets/default.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const YourRecipes=()=>{const[userRecipes,setUserRecipes]=useState([]);const[currentPage,setCurrentPage]=useState(1);const authToken=localStorage.getItem('authToken');const recipesPerPage=9;useEffect(()=>{const fetchUserRecipes=async()=>{try{// need to update later with hosting\nconst response=await axios.get('http://localhost:5000/user-recipes',{headers:{Authorization:\"Bearer \".concat(authToken)}});setUserRecipes(response.data);}catch(error){console.error('Error fetching user recipes:',error);}};if(authToken){fetchUserRecipes();}},[authToken]);const totalPages=Math.ceil(userRecipes.length/recipesPerPage);const handlePageChange=page=>{setCurrentPage(page);};const indexOfLastRecipe=currentPage*recipesPerPage;const indexOfFirstRecipe=indexOfLastRecipe-recipesPerPage;const currentRecipes=userRecipes.slice(indexOfFirstRecipe,indexOfLastRecipe);function truncateTitle(text){const max=56;if(text.length>max){return text.substring(0,max)+'...';}return text;}return/*#__PURE__*/_jsxs(\"div\",{className:\"overall\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Recipes\"}),authToken?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:currentRecipes.map(recipe=>/*#__PURE__*/_jsx(\"div\",{className:\"grid-unit--your\",children:/*#__PURE__*/_jsxs(Link,{to:\"/recipes/\".concat(recipe.recipe_id),children:[/*#__PURE__*/_jsx(\"h3\",{children:truncateTitle(recipe.title)}),recipe.image?/*#__PURE__*/_jsx(\"img\",{src:recipe.image,alt:recipe.title}):/*#__PURE__*/_jsx(\"img\",{id:\"image--default\",src:defaultImage,alt:\"N/A\"})]})},recipe.recipe_id))}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:Array.from({length:totalPages},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(index+1),className:\"button--page \".concat(currentPage===index+1?'active-page':''),children:index+1},index))})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Please log in to view your recipes.\"})]});};export default YourRecipes;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","defaultImage","jsx","_jsx","jsxs","_jsxs","YourRecipes","userRecipes","setUserRecipes","currentPage","setCurrentPage","authToken","localStorage","getItem","recipesPerPage","fetchUserRecipes","response","get","headers","Authorization","concat","data","error","console","totalPages","Math","ceil","length","handlePageChange","page","indexOfLastRecipe","indexOfFirstRecipe","currentRecipes","slice","truncateTitle","text","max","substring","className","children","map","recipe","to","recipe_id","title","image","src","alt","id","Array","from","_","index","onClick"],"sources":["/Users/adamrathbun/Desktop/cinema-chef/client/src/components/YourRecipes/YourRecipes.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport './YourRecipes.scss';\nimport defaultImage from '../../assets/default.png';\n\nconst YourRecipes = () => {\n  const [userRecipes, setUserRecipes] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const authToken = localStorage.getItem('authToken');\n  const recipesPerPage = 9;\n\n  useEffect(() => {\n    const fetchUserRecipes = async () => {\n      try {\n        // need to update later with hosting\n        const response = await axios.get('http://localhost:5000/user-recipes', {\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n          },\n        });\n        setUserRecipes(response.data);\n      } catch (error) {\n        console.error('Error fetching user recipes:', error);\n      }\n    };\n\n    if (authToken) {\n      fetchUserRecipes();\n    }\n  }, [authToken]);\n\n  const totalPages = Math.ceil(userRecipes.length / recipesPerPage);\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n  };\n\n  const indexOfLastRecipe = currentPage * recipesPerPage;\n  const indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n  const currentRecipes = userRecipes.slice(indexOfFirstRecipe, indexOfLastRecipe);\n\n  function truncateTitle(text) {\n    const max = 56\n    if (text.length > max) {\n      return text.substring(0, max) + '...'\n    }\n    return text\n  }\n\n  return (\n    <div className='overall'>\n      <h2>Your Recipes</h2>\n      {authToken ? (\n        <div>\n          <div className='grid'>\n            {currentRecipes.map((recipe) => (\n              <div className='grid-unit--your' key={recipe.recipe_id}>\n                <Link to={`/recipes/${recipe.recipe_id}`}>\n                  <h3>{truncateTitle(recipe.title)}</h3>\n                  {recipe.image ? (\n                    <img src={recipe.image} alt={recipe.title} />\n                  ) : (\n                    <img id='image--default' src={defaultImage} alt='N/A' />\n                  )\n                  }\n                </Link>\n              </div>\n            ))}\n          </div>\n          {totalPages > 1 && (\n            <div className='pagination'>\n              {Array.from({ length: totalPages }, (_, index) => (\n                <button\n                  key={index}\n                  onClick={() => handlePageChange(index + 1)}\n                  className={`button--page ${currentPage === index + 1 ? 'active-page' : ''}`}\n                >\n                  {index + 1}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        <p>Please log in to view your recipes.</p>\n      )}\n    </div>\n  );\n};\n\nexport default YourRecipes;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}