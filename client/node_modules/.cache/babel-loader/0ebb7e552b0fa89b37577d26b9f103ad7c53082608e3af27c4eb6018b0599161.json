{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useParams,Link}from'react-router-dom';import'./SearchResults.scss';import defaultImage from'../../assets/default.png';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const SearchResults=()=>{const[searchResults,setSearchResults]=useState([]);const[currentPage,setCurrentPage]=useState(1);const{searchType,searchTerm}=useParams();const authToken=localStorage.getItem('authToken');const recipesPerPage=9;useEffect(()=>{const fetchSearchResults=async()=>{try{let endpoint;switch(searchType){case'meal-type':endpoint=\"/recipes/meal-type/\".concat(searchTerm);break;case'dietary-restriction':endpoint=\"/recipes/dietary-restriction/\".concat(searchTerm);break;case'movie-genre':endpoint=\"/recipes/movie-genre/\".concat(searchTerm);break;case'recipe-name':endpoint=\"/recipes/recipe-name/\".concat(searchTerm);break;default:console.error('Invalid search type:',searchType);return;}const response=await axios.get(\"http://localhost:5000\".concat(endpoint),{headers:{Authorization:\"Bearer \".concat(authToken)}});setSearchResults(response.data);}catch(error){console.error(\"Error fetching search results for \".concat(searchType,\":\"),error);}};fetchSearchResults();},[authToken,searchType,searchTerm]);const totalPages=Math.ceil(searchResults.length/recipesPerPage);const handlePageChange=page=>{setCurrentPage(page);};const indexOfLastRecipe=currentPage*recipesPerPage;const indexOfFirstRecipe=indexOfLastRecipe-recipesPerPage;const currentRecipes=searchResults.slice(indexOfFirstRecipe,indexOfLastRecipe);function truncateTitle(text){const max=66;if(text.length>max){return text.substring(0,max)+'...';}return text;}return/*#__PURE__*/_jsxs(\"div\",{className:\"overall\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search Results\"}),searchResults.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"No recipes matching that search.\"}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:currentRecipes.map(recipe=>/*#__PURE__*/_jsx(\"div\",{className:\"grid-unit--large\",children:/*#__PURE__*/_jsxs(Link,{to:\"/recipes/\".concat(recipe.recipe_id),children:[/*#__PURE__*/_jsx(\"h3\",{children:truncateTitle(recipe.title)}),recipe.image?/*#__PURE__*/_jsx(\"img\",{src:recipe.image,alt:recipe.title}):/*#__PURE__*/_jsx(\"img\",{id:\"image--default\",src:defaultImage,alt:\"N/A\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Meal Type: \",recipe.meal_type]}),recipe.dietary_restriction==='gluten_free'?/*#__PURE__*/_jsx(\"p\",{children:\"Dietary Restriction: gluten free\"}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Dietary Restriction: \",recipe.dietary_restriction]})]})},recipe.recipe_id))}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:Array.from({length:totalPages},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(index+1),className:\"button--page \".concat(currentPage===index+1?'active-page':''),children:index+1},index))})]})]});};export default SearchResults;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","Link","defaultImage","jsx","_jsx","jsxs","_jsxs","SearchResults","searchResults","setSearchResults","currentPage","setCurrentPage","searchType","searchTerm","authToken","localStorage","getItem","recipesPerPage","fetchSearchResults","endpoint","concat","console","error","response","get","headers","Authorization","data","totalPages","Math","ceil","length","handlePageChange","page","indexOfLastRecipe","indexOfFirstRecipe","currentRecipes","slice","truncateTitle","text","max","substring","className","children","map","recipe","to","recipe_id","title","image","src","alt","id","meal_type","dietary_restriction","Array","from","_","index","onClick"],"sources":["/Users/adamrathbun/Desktop/cinema-chef/client/src/components/SearchResults/SearchResults.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useParams, Link } from 'react-router-dom';\nimport './SearchResults.scss';\nimport defaultImage from '../../assets/default.png';\n\nconst SearchResults = () => {\n  const [searchResults, setSearchResults] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const { searchType, searchTerm } = useParams();\n  const authToken = localStorage.getItem('authToken');\n  const recipesPerPage = 9;\n\n  useEffect(() => {\n    const fetchSearchResults = async () => {\n      try {\n        let endpoint;\n        switch (searchType) {\n          case 'meal-type':\n            endpoint = `/recipes/meal-type/${searchTerm}`;\n            break;\n          case 'dietary-restriction':\n            endpoint = `/recipes/dietary-restriction/${searchTerm}`;\n            break;\n          case 'movie-genre':\n            endpoint = `/recipes/movie-genre/${searchTerm}`;\n            break;\n          case 'recipe-name':\n            endpoint = `/recipes/recipe-name/${searchTerm}`;\n            break;\n          default:\n            console.error('Invalid search type:', searchType);\n            return;\n        }\n        const response = await axios.get(`http://localhost:5000${endpoint}`, {\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n          },\n        });\n        setSearchResults(response.data);\n      } catch (error) {\n        console.error(`Error fetching search results for ${searchType}:`, error);\n      }\n    };\n\n    fetchSearchResults();\n  }, [authToken, searchType, searchTerm]);\n\n  const totalPages = Math.ceil(searchResults.length / recipesPerPage);\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n  };\n\n  const indexOfLastRecipe = currentPage * recipesPerPage;\n  const indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n  const currentRecipes = searchResults.slice(indexOfFirstRecipe, indexOfLastRecipe);\n\n  function truncateTitle(text) {\n    const max = 66\n    if (text.length > max) {\n      return text.substring(0, max) + '...'\n    }\n    return text\n  }\n\n  return (\n    <div className='overall'>\n      <h2>Search Results</h2>\n      {searchResults.length === 0 ? (\n        <h3>No recipes matching that search.</h3>\n      ) : (\n        <div>\n          <div className='grid'>\n            {currentRecipes.map((recipe) => (\n              <div className='grid-unit--large' key={recipe.recipe_id}>\n                <Link to={`/recipes/${recipe.recipe_id}`}>\n                  <h3>{truncateTitle(recipe.title)}</h3>\n                  {recipe.image ? (\n                    <img src={recipe.image} alt={recipe.title} />\n                  ) : (\n                    <img id='image--default' src={defaultImage} alt='N/A' />\n                  )}\n                  <p>Meal Type: {recipe.meal_type}</p>\n                  {recipe.dietary_restriction === 'gluten_free' ? (\n                    <p>Dietary Restriction: gluten free</p>\n                  ) : (\n                    <p>Dietary Restriction: {recipe.dietary_restriction}</p>\n                  )}\n                </Link>\n              </div>\n            ))}\n          </div>\n          {totalPages > 1 && (\n            <div className='pagination'>\n              {Array.from({ length: totalPages }, (_, index) => (\n                <button\n                  key={index}\n                  onClick={() => handlePageChange(index + 1)}\n                  className={`button--page ${currentPage === index + 1 ? 'active-page' : ''}`}\n                >\n                  {index + 1}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SearchResults;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}