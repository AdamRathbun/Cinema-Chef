{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{Link}from'react-router-dom';import defaultImage from'../../assets/default.png';import'./SavedRecipes.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SavedRecipes(){const[savedRecipes,setSavedRecipes]=useState([]);const[currentPage,setCurrentPage]=useState(1);const authToken=localStorage.getItem('authToken');const recipesPerPage=9;useEffect(()=>{const fetchSavedRecipes=async()=>{try{// *need to update later with hosting\nconst response=await axios.get('http://localhost:5000/saved-recipes',{headers:{Authorization:\"Bearer \".concat(authToken)}});setSavedRecipes(response.data);}catch(error){console.error('Error fetching saved recipes:',error);}};if(authToken){fetchSavedRecipes();}},[authToken]);const totalPages=Math.ceil(savedRecipes.length/recipesPerPage);const handlePageChange=page=>{setCurrentPage(page);};const indexOfLastRecipe=currentPage*recipesPerPage;const indexOfFirstRecipe=indexOfLastRecipe-recipesPerPage;const currentRecipes=savedRecipes.slice(indexOfFirstRecipe,indexOfLastRecipe);function truncateTitle(text){const max=66;if(text.length>max){return text.substring(0,max)+'...';}return text;}return/*#__PURE__*/_jsxs(\"div\",{className:\"overall\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Saved Recipes\"}),authToken?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:currentRecipes.map(recipe=>/*#__PURE__*/_jsx(\"div\",{className:\"grid-unit--large\",children:/*#__PURE__*/_jsxs(Link,{to:\"/recipes/\".concat(recipe.recipe_id),children:[/*#__PURE__*/_jsx(\"h3\",{children:truncateTitle(recipe.title)}),recipe.image?/*#__PURE__*/_jsx(\"img\",{src:recipe.image,alt:recipe.title}):/*#__PURE__*/_jsx(\"img\",{id:\"image--default\",src:defaultImage,alt:\"N/A\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Meal Type: \",recipe.meal_type]}),recipe.dietary_restriction==='gluten_free'?/*#__PURE__*/_jsx(\"p\",{children:\"Dietary Restriction: gluten free\"}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Dietary Restriction: \",recipe.dietary_restriction]})]})},recipe.recipe_id))}),totalPages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"pagination\",children:Array.from({length:totalPages},(_,index)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>handlePageChange(index+1),className:\"button--page \".concat(currentPage===index+1?'active-page':''),children:index+1},index))})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Please log in to view your saved recipes.\"})]});}export default SavedRecipes;","map":{"version":3,"names":["React","useState","useEffect","axios","Link","defaultImage","jsx","_jsx","jsxs","_jsxs","SavedRecipes","savedRecipes","setSavedRecipes","currentPage","setCurrentPage","authToken","localStorage","getItem","recipesPerPage","fetchSavedRecipes","response","get","headers","Authorization","concat","data","error","console","totalPages","Math","ceil","length","handlePageChange","page","indexOfLastRecipe","indexOfFirstRecipe","currentRecipes","slice","truncateTitle","text","max","substring","className","children","map","recipe","to","recipe_id","title","image","src","alt","id","meal_type","dietary_restriction","Array","from","_","index","onClick"],"sources":["/Users/adamrathbun/Desktop/cinema-chef/client/src/components/SavedRecipes/SavedRecipes.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport defaultImage from '../../assets/default.png';\nimport './SavedRecipes.scss';\n\nfunction SavedRecipes() {\n  const [savedRecipes, setSavedRecipes] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const authToken = localStorage.getItem('authToken');\n  const recipesPerPage = 9;\n\n  useEffect(() => {\n    const fetchSavedRecipes = async () => {\n      try {\n        // *need to update later with hosting\n        const response = await axios.get('http://localhost:5000/saved-recipes', {\n          headers: {\n            Authorization: `Bearer ${authToken}`,\n          },\n        });\n        setSavedRecipes(response.data);\n      } catch (error) {\n        console.error('Error fetching saved recipes:', error);\n      }\n    };\n\n    if (authToken) {\n      fetchSavedRecipes();\n    }\n  }, [authToken]);\n\n  const totalPages = Math.ceil(savedRecipes.length / recipesPerPage);\n\n  const handlePageChange = (page) => {\n    setCurrentPage(page);\n  };\n\n  const indexOfLastRecipe = currentPage * recipesPerPage;\n  const indexOfFirstRecipe = indexOfLastRecipe - recipesPerPage;\n  const currentRecipes = savedRecipes.slice(indexOfFirstRecipe, indexOfLastRecipe);\n\n  function truncateTitle(text) {\n    const max = 66\n    if (text.length > max) {\n      return text.substring(0, max) + '...'\n    }\n    return text\n  }\n\n  return (\n    <div className='overall'>\n      <h2>Saved Recipes</h2>\n      {authToken ? (\n        <div>\n          <div className='grid'>\n            {currentRecipes.map((recipe) => (\n              <div className='grid-unit--large' key={recipe.recipe_id}>\n                <Link to={`/recipes/${recipe.recipe_id}`}>\n                  <h3>{truncateTitle(recipe.title)}</h3>\n                  {recipe.image ? (\n                    <img src={recipe.image} alt={recipe.title} />\n                  ) : (\n                    <img id='image--default' src={defaultImage} alt='N/A' />\n                  )\n                  }\n                  <p>Meal Type: {recipe.meal_type}</p>\n                  {recipe.dietary_restriction === 'gluten_free' ? (\n                    <p>Dietary Restriction: gluten free</p>\n                  ) : (\n                    <p>Dietary Restriction: {recipe.dietary_restriction}</p>\n                  )\n                  }\n                </Link>\n              </div>\n            ))}\n          </div>\n          {totalPages > 1 && (\n            <div className='pagination'>\n              {Array.from({ length: totalPages }, (_, index) => (\n                <button\n                  key={index}\n                  onClick={() => handlePageChange(index + 1)}\n                  className={`button--page ${currentPage === index + 1 ? 'active-page' : ''}`}\n                >\n                  {index + 1}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      ) : (\n        <p>Please log in to view your saved recipes.</p>\n      )}\n    </div>\n  );\n}\n\nexport default SavedRecipes;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}