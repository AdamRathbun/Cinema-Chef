{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./UpdateRecipe.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateRecipe(_ref){let{field,initialValue,onUpdate,id,authToken}=_ref;const[isEditing,setIsEditing]=useState(false);const[value,setValue]=useState(initialValue);const[isUpdating,setIsUpdating]=useState(false);useEffect(()=>{setValue(initialValue);},[initialValue]);const handleEdit=()=>{setIsEditing(true);};const handleCancel=()=>{setIsEditing(false);setValue(initialValue);};const handleChange=e=>{setValue(e.target.value);};const handleFileChange=e=>{setValue(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();if(isUpdating){console.log('Update already in progress. Ignoring.');return;}setIsUpdating(true);setIsEditing(false);try{const formData=new FormData();formData.append('field',field);if(field==='image'){formData.append('image',value);}else{formData.append('value',value);}// *need to update later with hosting\nconst response=await axios.put(\"http://localhost:5000/recipes/\".concat(id),formData,{headers:{Authorization:\"Bearer \".concat(authToken),'Content-Type':'multipart/form-data'}});if(onUpdate){onUpdate(field,response.data[field]);}}catch(error){console.error(\"Error updating \".concat(field,\":\"),error);}finally{setIsUpdating(false);}};return/*#__PURE__*/_jsx(\"div\",{children:isEditing?/*#__PURE__*/_jsxs(\"form\",{className:\"form-container\",onSubmit:handleSubmit,children:[field==='image'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Choose new image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,accept:\"image/*\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[field==='meal_type'&&/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"breakfast\",children:\"Breakfast\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lunch\",children:\"Lunch\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dinner\",children:\"Dinner\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dessert\",children:\"Dessert\"}),/*#__PURE__*/_jsx(\"option\",{value:\"drink\",children:\"Drink\"})]}),field==='dietary_restriction'&&/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Dietary Restriction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vegan\",children:\"Vegan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vegetarian\",children:\"Vegetarian\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gluten_free\",children:\"Gluten Free\"}),/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"None\"})]}),field==='movie_genre'&&/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Movie Genre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"action\",children:\"Action\"}),/*#__PURE__*/_jsx(\"option\",{value:\"comedy\",children:\"Comedy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"drama\",children:\"Drama\"}),/*#__PURE__*/_jsx(\"option\",{value:\"thriller\",children:\"Thriller\"}),/*#__PURE__*/_jsx(\"option\",{value:\"horror\",children:\"Horror\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sci_fi\",children:\"Sci-Fi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fantasy\",children:\"Fantasy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"romance\",children:\"Romance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"animated\",children:\"Animated\"}),/*#__PURE__*/_jsx(\"option\",{value:\"documentary\",children:\"Documentary\"})]}),field!=='meal_type'&&field!=='dietary_restriction'&&field!=='movie_genre'&&/*#__PURE__*/_jsx(\"textarea\",{name:field,value:value,onChange:handleChange,required:true,className:field==='description'||field==='instructions'?'min-height-field':field==='ingredients'?'min-height-field--small':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"update-button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",type:\"submit\",children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",type:\"button\",onClick:handleCancel,children:\"Cancel\"})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",type:\"button\",onClick:handleEdit,children:\"Edit\"})});}export default UpdateRecipe;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UpdateRecipe","_ref","field","initialValue","onUpdate","id","authToken","isEditing","setIsEditing","value","setValue","isUpdating","setIsUpdating","handleEdit","handleCancel","handleChange","e","target","handleFileChange","files","handleSubmit","preventDefault","console","log","formData","FormData","append","response","put","concat","headers","Authorization","data","error","children","className","onSubmit","type","onChange","accept","name","required","onClick"],"sources":["/Users/adamrathbun/Desktop/cinema-chef/client/src/components/UpdateRecipe/UpdateRecipe.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './UpdateRecipe.scss';\n\nfunction UpdateRecipe({ field, initialValue, onUpdate, id, authToken }) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [value, setValue] = useState(initialValue);\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useEffect(() => {\n    setValue(initialValue);\n  }, [initialValue]);\n\n  const handleEdit = () => {\n    setIsEditing(true);\n  };\n\n  const handleCancel = () => {\n    setIsEditing(false);\n    setValue(initialValue);\n  };\n\n  const handleChange = (e) => {\n    setValue(e.target.value);\n  };\n\n  const handleFileChange = (e) => {\n    setValue(e.target.files[0]);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (isUpdating) {\n      console.log('Update already in progress. Ignoring.');\n      return;\n    }\n\n    setIsUpdating(true);\n\n    setIsEditing(false);\n\n    try {\n      const formData = new FormData();\n\n      formData.append('field', field);\n      if (field === 'image') {\n        formData.append('image', value);\n      } else {\n        formData.append('value', value);\n      }\n\n      // *need to update later with hosting\n      const response = await axios.put(`http://localhost:5000/recipes/${id}`, formData, {\n        headers: {\n          Authorization: `Bearer ${authToken}`,\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n\n      if (onUpdate) {\n        onUpdate(field, response.data[field]);\n      }\n    } catch (error) {\n      console.error(`Error updating ${field}:`, error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n  return (\n    <div>\n      {isEditing ? (\n        <form className='form-container' onSubmit={handleSubmit}>\n          {field === 'image' ? (\n            <>\n              <label>Choose new image</label>\n              <input type=\"file\" onChange={handleFileChange} accept=\"image/*\" />\n            </>\n          ) : (\n            <>\n              {field === 'meal_type' && (\n                <select value={value} onChange={handleChange}>\n                  <option value=\"\">Category</option>\n                  <option value=\"breakfast\">Breakfast</option>\n                  <option value=\"lunch\">Lunch</option>\n                  <option value=\"dinner\">Dinner</option>\n                  <option value=\"dessert\">Dessert</option>\n                  <option value=\"drink\">Drink</option>\n                </select>\n              )}\n              {field === 'dietary_restriction' && (\n                <select value={value} onChange={handleChange}>\n                  <option value=\"\">Select Dietary Restriction</option>\n                  <option value=\"vegan\">Vegan</option>\n                  <option value=\"vegetarian\">Vegetarian</option>\n                  <option value=\"gluten_free\">Gluten Free</option>\n                  <option value=\"none\">None</option>\n                </select>\n              )}\n              {field === 'movie_genre' && (\n                <select value={value} onChange={handleChange}>\n                  <option value=\"\">Select Movie Genre</option>\n                  <option value=\"action\">Action</option>\n                  <option value=\"comedy\">Comedy</option>\n                  <option value=\"drama\">Drama</option>\n                  <option value=\"thriller\">Thriller</option>\n                  <option value=\"horror\">Horror</option>\n                  <option value=\"sci_fi\">Sci-Fi</option>\n                  <option value=\"fantasy\">Fantasy</option>\n                  <option value=\"romance\">Romance</option>\n                  <option value=\"animated\">Animated</option>\n                  <option value=\"documentary\">Documentary</option>\n                </select>\n              )}\n              {(field !== 'meal_type' && field !== 'dietary_restriction' && field !== 'movie_genre') && (\n                <textarea\n                  name={field}\n                  value={value}\n                  onChange={handleChange}\n                  required\n                  className={(field === 'description' || field === 'instructions') ? 'min-height-field' : (field === 'ingredients') ? 'min-height-field--small' : ''}\n                />\n              )}\n            </>\n          )}\n          <div className='update-button-container'>\n            <button className='update-button' type=\"submit\">Update</button>\n            <button className='update-button' type=\"button\" onClick={handleCancel}>Cancel</button>\n          </div>\n        </form>\n      ) : (\n        <button className='update-button' type=\"button\" onClick={handleEdit}>Edit</button>\n      )}\n    </div>\n  );\n}\n\nexport default UpdateRecipe;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}