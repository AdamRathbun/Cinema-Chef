{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./UpdateRecipe.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateRecipe(_ref){let{field,initialValue,onUpdate,id,authToken}=_ref;const[isEditing,setIsEditing]=useState(false);const[value,setValue]=useState(initialValue);const[isUpdating,setIsUpdating]=useState(false);useEffect(()=>{setValue(initialValue);},[initialValue]);const handleEdit=()=>{setIsEditing(true);};const handleCancel=()=>{setIsEditing(false);setValue(initialValue);};const handleChange=e=>{setValue(e.target.value);};const handleFileChange=e=>{setValue(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();if(isUpdating){console.log('Update already in progress. Ignoring.');return;}setIsUpdating(true);setIsEditing(false);let formData=new FormData();if(field==='image'&&value instanceof File){formData.append('image',value,value.name);}else{formData.append(field,value);}formData.append('field',field);const config={headers:{'Content-Type':'multipart/form-data',Authorization:\"Bearer \".concat(authToken)}};try{const response=await axios.put(\"http://localhost:5000/recipes/\".concat(id),formData,config);if(response.data&&onUpdate){onUpdate(field,response.data[field]);}else{console.error(\"No data returned from server when updating \".concat(field));}}catch(error){console.error(\"Error updating \".concat(field,\":\"),error.response?error.response.data:error);}finally{setIsUpdating(false);}};return/*#__PURE__*/_jsx(\"div\",{children:isEditing?/*#__PURE__*/_jsxs(\"form\",{className:\"form-container\",onSubmit:handleSubmit,children:[field==='image'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Choose new image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,accept:\"image/*\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[field==='meal_type'&&/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"breakfast\",children:\"Breakfast\"}),/*#__PURE__*/_jsx(\"option\",{value:\"lunch\",children:\"Lunch\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dinner\",children:\"Dinner\"}),/*#__PURE__*/_jsx(\"option\",{value:\"dessert\",children:\"Dessert\"}),/*#__PURE__*/_jsx(\"option\",{value:\"drink\",children:\"Drink\"})]}),field==='dietary_restriction'&&/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Dietary Restriction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vegan\",children:\"Vegan\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vegetarian\",children:\"Vegetarian\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gluten_free\",children:\"Gluten Free\"}),/*#__PURE__*/_jsx(\"option\",{value:\"none\",children:\"None\"})]}),field==='movie_genre'&&/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Movie Genre\"}),/*#__PURE__*/_jsx(\"option\",{value:\"action\",children:\"Action\"}),/*#__PURE__*/_jsx(\"option\",{value:\"comedy\",children:\"Comedy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"drama\",children:\"Drama\"}),/*#__PURE__*/_jsx(\"option\",{value:\"thriller\",children:\"Thriller\"}),/*#__PURE__*/_jsx(\"option\",{value:\"horror\",children:\"Horror\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sci_fi\",children:\"Sci-Fi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fantasy\",children:\"Fantasy\"}),/*#__PURE__*/_jsx(\"option\",{value:\"romance\",children:\"Romance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"animated\",children:\"Animated\"}),/*#__PURE__*/_jsx(\"option\",{value:\"documentary\",children:\"Documentary\"})]}),field!=='meal_type'&&field!=='dietary_restriction'&&field!=='movie_genre'&&/*#__PURE__*/_jsx(\"textarea\",{name:field,value:value,onChange:handleChange,required:true,className:field==='description'||field==='instructions'?'min-height-field':field==='ingredients'?'min-height-field--small':''})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"update-button-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",type:\"submit\",children:\"Update\"}),/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",type:\"button\",onClick:handleCancel,children:\"Cancel\"})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"update-button\",type:\"button\",onClick:handleEdit,children:\"Edit\"})});}export default UpdateRecipe;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","UpdateRecipe","_ref","field","initialValue","onUpdate","id","authToken","isEditing","setIsEditing","value","setValue","isUpdating","setIsUpdating","handleEdit","handleCancel","handleChange","e","target","handleFileChange","files","handleSubmit","preventDefault","console","log","formData","FormData","File","append","name","config","headers","Authorization","concat","response","put","data","error","children","className","onSubmit","type","onChange","accept","required","onClick"],"sources":["/Users/adamrathbun/Desktop/cinema-chef/client/src/components/UpdateRecipe/UpdateRecipe.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './UpdateRecipe.scss';\n\nfunction UpdateRecipe({ field, initialValue, onUpdate, id, authToken }) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [value, setValue] = useState(initialValue);\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  useEffect(() => {\n    setValue(initialValue);\n  }, [initialValue]);\n\n  const handleEdit = () => {\n    setIsEditing(true);\n  };\n\n  const handleCancel = () => {\n    setIsEditing(false);\n    setValue(initialValue);\n  };\n\n  const handleChange = (e) => {\n    setValue(e.target.value);\n  };\n\n  const handleFileChange = (e) => {\n    setValue(e.target.files[0]);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    if (isUpdating) {\n      console.log('Update already in progress. Ignoring.');\n      return;\n    }\n\n    setIsUpdating(true);\n    setIsEditing(false);\n\n    let formData = new FormData();\n    if (field === 'image' && value instanceof File) {\n      formData.append('image', value, value.name);\n    } else {\n      formData.append(field, value);\n    }\n    formData.append('field', field);\n\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n        Authorization: `Bearer ${authToken}`,\n      },\n    };\n\n    try {\n      const response = await axios.put(`http://localhost:5000/recipes/${id}`, formData, config);\n\n      if (response.data && onUpdate) {\n        onUpdate(field, response.data[field]);\n      } else {\n        console.error(`No data returned from server when updating ${field}`);\n      }\n    } catch (error) {\n      console.error(`Error updating ${field}:`, error.response ? error.response.data : error);\n    } finally {\n      setIsUpdating(false);\n    }\n  };\n\n\n  return (\n    <div>\n      {isEditing ? (\n        <form className='form-container' onSubmit={handleSubmit}>\n          {field === 'image' ? (\n            <>\n              <label>Choose new image</label>\n              <input type=\"file\" onChange={handleFileChange} accept=\"image/*\" />\n            </>\n          ) : (\n            <>\n              {field === 'meal_type' && (\n                <select value={value} onChange={handleChange}>\n                  <option value=\"\">Category</option>\n                  <option value=\"breakfast\">Breakfast</option>\n                  <option value=\"lunch\">Lunch</option>\n                  <option value=\"dinner\">Dinner</option>\n                  <option value=\"dessert\">Dessert</option>\n                  <option value=\"drink\">Drink</option>\n                </select>\n              )}\n              {field === 'dietary_restriction' && (\n                <select value={value} onChange={handleChange}>\n                  <option value=\"\">Select Dietary Restriction</option>\n                  <option value=\"vegan\">Vegan</option>\n                  <option value=\"vegetarian\">Vegetarian</option>\n                  <option value=\"gluten_free\">Gluten Free</option>\n                  <option value=\"none\">None</option>\n                </select>\n              )}\n              {field === 'movie_genre' && (\n                <select value={value} onChange={handleChange}>\n                  <option value=\"\">Select Movie Genre</option>\n                  <option value=\"action\">Action</option>\n                  <option value=\"comedy\">Comedy</option>\n                  <option value=\"drama\">Drama</option>\n                  <option value=\"thriller\">Thriller</option>\n                  <option value=\"horror\">Horror</option>\n                  <option value=\"sci_fi\">Sci-Fi</option>\n                  <option value=\"fantasy\">Fantasy</option>\n                  <option value=\"romance\">Romance</option>\n                  <option value=\"animated\">Animated</option>\n                  <option value=\"documentary\">Documentary</option>\n                </select>\n              )}\n              {(field !== 'meal_type' && field !== 'dietary_restriction' && field !== 'movie_genre') && (\n                <textarea\n                  name={field}\n                  value={value}\n                  onChange={handleChange}\n                  required\n                  className={(field === 'description' || field === 'instructions') ? 'min-height-field' : (field === 'ingredients') ? 'min-height-field--small' : ''}\n                />\n              )}\n            </>\n          )}\n          <div className='update-button-container'>\n            <button className='update-button' type=\"submit\">Update</button>\n            <button className='update-button' type=\"button\" onClick={handleCancel}>Cancel</button>\n          </div>\n        </form>\n      ) : (\n        <button className='update-button' type=\"button\" onClick={handleEdit}>Edit</button>\n      )}\n    </div>\n  );\n}\n\nexport default UpdateRecipe;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}